// @flow
/* eslint-disable no-redeclare, no-unused-vars */

import type { Node, AbstractComponent } from 'react';

type Dependency = Function;

declare export class DiProvider extends React$Component<
  {
    children: Node,
    target?: AbstractComponent<any> | AbstractComponent<any>[],
    use: Dependency[],
  },
  {
    getDependencies: (
      deps: Dependency[],
      target: AbstractComponent<any> | AbstractComponent<any>[]
    ) => Dependency[],
  }
> {}

declare export function withDi<T: AbstractComponent<any>>(
  component: T,
  dependencies: Dependency[],
  target?: AbstractComponent<any> | null
): T;

declare export function mock<T: Dependency>(original: T, mock: T): T;

function di(...dependencies: Dependency[]) {
  di.mock = mock;
}
declare export { di };
